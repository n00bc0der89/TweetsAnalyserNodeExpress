<html>
<head>    
 <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
 <style>
   tr > td
    {
      padding-bottom: 0.3em;
      padding-right:0.6em;
    }
    
    #details{
        display:inline-block;
        float: right;
    }
    
    #taglist{
        display:inline-block;
    }
     
     #footer{
        background-color:black;
    }
    
 </style>
</head>
<%- include menu.ejs%>
<body>

    <div id="taglist">
        <h2>Keywords:</h2>
        <table id="tagstable">
            <% if(taglist.length > 0) { %>
            <% for(var x = 0; x < taglist.length; x++ ) { %>
            <tr>
                <td><b><a href="#" onclick="return false;"><%=taglist[x]%></a></b></td>    
            </tr>
            <% } %>
            <% } %>
            
        </table>
    </div>
    
    <div id="details">
    
    <div style="margin-left:30%" id="headertext"> <h2>Complete Details </h2></div>
    
    <table border = 1 style="margin-left:30%">
        <tr>
            <td>Total tweets streamed</td>
            <td><%=total%></td>
        </tr>
         <tr>
            <td>Total tweets replied</td>
            <td><%=repliedcount%></td>
        </tr>
        <tr>
            <td>Total positive tweets</td>
            <td><%=positivescore%></td>
        </tr>
         <tr>
            <td>Total negative tweets</td>
            <td><%=negativescore%></td>
        </tr>
         <tr>
            <td>Total agents</td>
            <td><%=agentcount.length%></td>
        </tr>
    </table>
    
    <div style="margin-left:30%" id="agentdet"> <h2>Agent Details </h2></div>
    <% 
    if (agentcount.length > 0) 
    {
        for(var i = 0 ; i <  agentcount.length ; i++)
        {
    %>
    <div id="container" <%=i%> style="margin-left:70px;display: inline-block; margin-top:20px" >
        <table border = 1>
             <tr>
                <td>Agent</td>
                <td><%=agentcount[i].agentname%></td>
            </tr>
            <tr>
                <td>Total tweets assigned</td>
                <td><%=agentcount[i].agenttotal%></td>
            </tr>
            <tr>
                <td>Total tweets replied</td>
                <td><%=agentcount[i].agentrepliedcount%></td>
            </tr>
            <tr>
                <td>Total Positive tweets</td>
                <td><%=agentcount[i].agentpositivescore%></td>
            </tr>
            <tr>
                <td>Total Negative tweets</td>
                <td><%=agentcount[i].agentnegativescore%></td>
            </tr>
            
            
        </table>
    </div>
    <%
        }
    }
    %>
    </div>
</body>
     <%- include footer.ejs%>
</html>

<script>

  $("#tagstable").on('click','a',function(e){
    
    var tagname = e.target.innerHTML;
    
        $.ajax(
            {
                url: "showagents",
                data:{"tag":tagname},
                success: function(pos)
                   {
                      $("body").html(pos);
                      $("#headertext").find("h2").html("Complete Details for keyword : " + tagname);
                       $("#agentdet").find("h2").html("Agent Details for keyword : " + tagname);
                       
                   }
          });    
             
    });
    
</script>